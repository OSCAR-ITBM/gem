<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>

	<f:ajax event="load" listener="#{polizaMantenimientoMB3.init}" />
	<ui:composition template="/WEB-INF/layout/layout.xhtml">
		<ui:define name="content">

			<h:form id="form1">
				<f:metadata>
					<f:viewAction action="#{polizaMantenimientoMB3.checkF5}"
						onPostBack="true" />
				</f:metadata>

				<p:panel id="panel" header="Mantenimiento de Polizas"
					styleClass="green col-md-14 col-centered row-centered shadow-panel">
					<p:growl id="messagesEdit" showDetail="true" widgetVar="g" />

					<p:focus context="objects" id="focusTable" />

					<p:remoteCommand name="zeroCH"
						actionListener="#{polizaMantenimientoMB3.defaultZero}"
						update=":form1:objects" />
					<p:remoteCommand name="chagePage" id="chagePage"
						actionListener="#{polizaMantenimientoMB3.focusChangePage}"
						update=":form1:objects" />
					<p:remoteCommand name="chagePage2" id="chagePage2"
						actionListener="#{polizaMantenimientoMB3.focusChangePage}"
						update=":form1:objects" />

					<p:remoteCommand name="createRow"
						update=":formCuentas:tcuentas, :form1:panel, :form1:objects"
						actionListener="#{polizaMantenimientoMB3.createRow}" />

					<p:remoteCommand name="validaFl"
						actionListener="#{polizaMantenimientoMB3.checkCatflu}"
						update=":formFlujoEfectivo:ctafluTable" />
					<p:remoteCommand name="findAccName"
						update=":form1:panel, :form1:objects"
						actionListener="#{polizaMantenimientoMB3.findAccName}" />
					<p:remoteCommand name="refresh" update=":form1:objects" />
					<p:remoteCommand name="errorChangeDate"
						update=":form1:messagesEdit, :form1:focusFecpol" />

					<p:panelGrid id="pgrid1"
						styleClass="green row-centered shadow-panel" style="width:100%;">
						<p:row>
							<p:column style="text-align: center;">
								<h:outputText value="A&ntilde;o" />
							</p:column>
							<p:column style="text-align: center;">
								<h:outputText value="Tipo" />
							</p:column>
							<p:column style="text-align: center;">
								<h:outputText value="Mes" />
							</p:column>
							<p:column style="text-align: center;">
								<h:outputText value="Numero" />
							</p:column>
							<p:column style="text-align: center;">
								<h:outputText value="Fecha" />
							</p:column>
							<p:column colspan="2" style="text-align: center;">
								<h:outputText value="Status" />
							</p:column>
							<p:column colspan="4" style="text-align: center;">
								<h:outputText value="Concepto" />
							</p:column>
							<p:column>
								<h:outputText value="Captur&oacute;:" />
							</p:column>
							<p:column>
								<h:outputText value="#{polizaMantenimientoMB3.polien.cappol}"
									id="cappol" size="10" maxlength="10" disabled="true" />
							</p:column>
							<p:column>
								<h:outputText value="Capturando" />
							</p:column>
							<p:column>
								<h:outputText value="#{polizaMantenimientoMB3.lockUser}"
									id="iduser" size="10" maxlength="10" disabled="true" />
							</p:column>
							<p:column>
								<p:commandButton value="Eliminar Poliza" id="pdl"
									onclick="PF('wingetPasswor').show(); resetPassMaintenance();"
									icon="ui-icon-trash" />
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<h:outputText value="#{polizaMantenimientoMB3.year}" id="year" />
							</p:column>

							<p:column>
								<p:selectOneMenu id="idPomantenimiento"
									value="#{polizaMantenimientoMB3.polien.tippol}">
									<f:selectItems value="#{polizaMantenimientoMB3.lisCattpo}"
										var="po" itemValue="#{po.tippol}" itemLabel="#{po.tippol}" />
									<p:ajax event="change" listener="#{polizaMantenimientoMB3.updatePolicyNumber}" update="idPomantenimiento lisconpol"></p:ajax>
								</p:selectOneMenu>
							</p:column>

							<p:column>
								<p:selectOneMenu id="selectmespoliza"
									value="#{polizaMantenimientoMB3.polien.mespol}" required="true">
									<f:selectItems value="#{polizaMantenimientoMB3.listMeses}"
										var="m" itemValue="#{m.mes}" itemLabel="#{m.mes}" />
									<p:ajax event="change" listener="#{polizaMantenimientoMB3.updatePolicyNumber}" update="selectmespoliza messagesEdit lisconpol"></p:ajax>
								</p:selectOneMenu>
							</p:column>

							<p:column>
								<h:inputText value="#{polizaMantenimientoMB3.polien.conpol}"
									id="lisconpol" size="6" maxlength="6"
									onkeypress="if (event.keyCode == 13) {document.getElementById('form1:findpoliza').click(); return false; }"
									required="true"
									converterMessage="Permite solo números mayores a cero"
									validatorMessage="Permite solo números mayores a cero"
									requiredMessage="Permite solo números mayores a cero">
									<pe:keyFilter for="lisconpol" mask="pint"></pe:keyFilter>

									<f:convertNumber pattern="000000" />
								</h:inputText>
							</p:column>
							<p:focus context="fecpol" id="focusFecpol" for="fecpol" />
							<p:column>
								<p:calendar id="fecpol"
									value="#{polizaMantenimientoMB3.polien.fecpol}" maxlength="10"
									locale="es" size="10" pattern="dd/MM/yyyy" required="true"
									mask="true" requiredMessage="El campo de Fecha es requerido"
									timeZone="" disabled="#{polizaMantenimientoMB3.activButtons}"
									maxdate="#{polizaMantenimientoMB3.maxDate}"
									converterMessage="La fecha debe ser en fomato de dd/MM/aaaa"
									onblur="if(!/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(this.value) ){g.renderMessage({summary:'Error', detail: 'El campo Fecha debe ser de formato dd/mm/aaaa.', severity: 1}); this.focus(); }">
									<p:ajax event="dateSelect"
										listener="#{polizaMantenimientoMB3.onDateSelect}"
										update=":form1:fecpol" />
									<f:ajax event="change" execute="@this" render="fecpol"
										listener="#{polizaMantenimientoMB3.dateChange}" />
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</p:calendar>
							</p:column>
							<p:column>
								<h:inputText value="#{polizaMantenimientoMB3.polien.stapol}"
									id="stapol" size="1" maxlength="1" disabled="true" />
							</p:column>
							<p:column>
								<h:inputText value="#{polizaMantenimientoMB3.polien.staafe}"
									id="staafe" size="1" maxlength="1" disabled="true" />
							</p:column>

							<p:column rowspan="2" colspan="4">
								<h:inputTextarea
									value="#{polizaMantenimientoMB3.polien.polclv1}" rows="1"
									id="concepto" cols="50"
									disabled="#{polizaMantenimientoMB3.activButtons}">
									<p:ajax event="blur" oncomplete="PF('saveConfirmWdt').show();"></p:ajax>
								</h:inputTextarea>
							</p:column>
							<p:column>
								<p:commandButton value="Crear" id="newpoliza"
									actionListener="#{polizaMantenimientoMB3.createPolicy}"
									update="panel objects" icon="ui-icon-newwin"
									onstart="PF('blockUIWidget').block();"
									oncomplete="PF('blockUIWidget').unblock();" />
							</p:column>
							<p:column>
								<p:commandButton value="Buscar" id="findpoliza"
									actionListener="#{polizaMantenimientoMB3.findPolice}"
									async="true" update=":form1:panel, :form1:objects"
									icon="ui-icon-search" onstart="PF('blockUIWidget').block();"
									oncomplete="PF('blockUIWidget').unblock();" />
							</p:column>
							<p:column colspan="3">
								<p:commandButton value="Primero" id="primero"
									actionListener="#{polizaMantenimientoMB3.firstHead}"
									disabled="#{polizaMantenimientoMB3.bloqueaBoton}" async="true"
									update=":form1:objects, :form1:panel" icon="ui-icon-seek-first"
									onstart="PF('blockUIWidget').block();"
									oncomplete="PF('blockUIWidget').unblock();" />
								<p:commandButton value="Anterior" id="anterior"
									update=":form1:objects, :form1:panel" async="true"
									actionListener="#{polizaMantenimientoMB3.previusHead}"
									icon="ui-icon-seek-prev" onstart="PF('blockUIWidget').block();"
									oncomplete="PF('blockUIWidget').unblock();" />
								<p:commandButton value="Siguiente" id="siguiente"
									actionListener="#{polizaMantenimientoMB3.nextHead}"
									async="true" update=":form1:panel, :form1:objects"
									icon="ui-icon-seek-next" onstart="PF('blockUIWidget').block();"
									oncomplete="PF('blockUIWidget').unblock();" />
								<p:commandButton value="Ultimo" id="ultimo"
									update=":form1:objects, :form1:panel" async="true"
									actionListener="#{polizaMantenimientoMB3.lastHead}"
									icon="ui-icon-seek-end" onstart="PF('blockUIWidget').block();"
									oncomplete="PF('blockUIWidget').unblock();" />
							</p:column>
						</p:row>
					</p:panelGrid>
					<pe:blockUI widgetVar="blockUIWidget" centerX="false">
						<h:panelGrid columns="2">
							<h:graphicImage value="../catalogs/please_wait.gif"
								style="margin-right: 12px; vertical-align: middle;" />
							<h:outputText value="Por favor espere..."
								style="white-space: nowrap;" />
						</h:panelGrid>
					</pe:blockUI>
					<p:focus for="objects" id="fcsObjects"></p:focus>
					<p:dataTable id="objects" binding="#{table}" var="object"
						value="#{polizaMantenimientoMB3.polideDataModel}"
						styleClass="et_datatable" emptyMessage="No hay registros"
						editable="#{polizaMantenimientoMB3.editableTable}"
						selectionMode="single" rowKey="#{object.index}" scrollable="true"
						paginator="true" lazy="true" rows="20" paginatorPosition="bottom"
						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						style="margin-bottom:10px; padding: 0px 10px !important;"
						selection="#{polizaMantenimientoMB3.polideSelect}"
						widgetVar="polizasWdg" rowIndexVar="index">
						<p:ajax event="rowEditInit"
							listener="#{polizaMantenimientoMB3.onInitRowEdit}"
							oncomplete="$('.ui-row-editor span.ui-icon-pencil').each(function(){$(this).css('visibility','hidden')});" />
						<p:ajax event="rowEdit"
							listener="#{polizaMantenimientoMB3.onRowEdit}" immediate="true"
							update=":form1:messagesEdit, :form1:objects, :formFlujoEfectivo:tippolflu, :formFlujoEfectivo:mespolflu, :formFlujoEfectivo:conpolflu, :formFlujoEfectivo:sumaflujoe, :formFlujoEfectivo:sumaflujobuff, :formFlujoEfectivo:renpolflu, :formFlujoEfectivo:ctafluTable, :form1:focusFecpol "
							onstart="PF('blockUIWidget').block();"
							oncomplete="$('.ui-row-editor span.ui-icon-pencil').each(function(){$(this).css('visibility','visible')});
							PF('blockUIWidget').unblock();
							" />
						<p:ajax event="rowEditCancel"
							listener="#{polizaMantenimientoMB3.onRowCancel}"
							update=":form1:messagesEdit, :form1:objects, :form1:polclv1, :form1:nomcta"
							onstart=" $('.ui-row-editor span.ui-icon-pencil').each(function(){$(this).css('visibility','visible')});"
							oncomplete="jQuery('#form1\\:hideButton2').click();"
							process="@this" />
						<p:ajax event="rowSelect"
							listener="#{polizaMantenimientoMB3.onRowSelect}"
							update=":form1:pgrid2, :form1:nomcta, :form1:polclv1"></p:ajax>

						<p:ajax event="page" onstart="PF('blockUIWidget').block();"
							oncomplete="PF('blockUIWidget').unblock();chagePage()"
							listener="#{polizaMantenimientoMB3.changePage}" />

						<p:column headerText="#" style="width:6%">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.renpol}" id="renglon">
										<f:convertNumber pattern="#.#" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputText id="renpol" value="#{object.renpol}"
										style="width:100%" maxlength="4"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;}"
										required="true"
										requiredMessage="El n&uacute;mero de rengl&oacute;n es requerido">
										<pe:keyFilter for="renpol" mask="num" />
										<p:ajax event="blur" update="renpol" />
										<!-- <f:convertNumber pattern="#.#" /> -->
									</p:inputText>

								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Cuenta" style="width:5%">
							<p:cellEditor>
								<f:facet name="output">

									<h:outputText value="#{object.cuenta}" />

								</f:facet>
								<f:facet name="input">

									<p:inputText id="cuenta" value="#{object.cuenta}"
										style="width:100%" maxlength="4"
										ondblclick="PF('tbCuentas').clearFilters();PF('cuentascon').show(); return false;"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;}">
										<pe:keyFilter for="cuenta" mask="int"></pe:keyFilter>
										<p:ajax event="blur" update="cuenta"></p:ajax>

									</p:inputText>

								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Scta" style="width:10%">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.scta}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText id="scta" value="#{object.scta}"
										style="width:100%" maxlength="10"
										onkeyup="this.value=this.value.toUpperCase();"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;}">

										<p:ajax event="blur" update="scta"
											listener="#{polizaMantenimientoMB3.scuentaChangeListener}"></p:ajax>
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Sscta" style="width:14%">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.sscta}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText id="sscta" value="#{object.sscta}"
										style="width:100%" maxlength="15"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;}">

										<p:ajax event="blur" update="sscta"
											listener="#{polizaMantenimientoMB3.sscuentaChangeListener}"></p:ajax>
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Ssscta" style="width:5%">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.ssscta}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText id="ssscta" value="#{object.ssscta}"
										style="width:100%" maxlength="4"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;}">
										<pe:keyFilter for="ssscta" mask="pint"></pe:keyFilter>
										<p:ajax event="blur" update="ssscta"
											listener="#{polizaMantenimientoMB3.ssscuentaChangeListener}"></p:ajax>
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Sssscta" style="width:5%">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.sssscta}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText id="sssscta" value="#{object.sssscta}"
										style="width:100%" maxlength="3"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;}">
										<pe:keyFilter for="sssscta" mask="pint"></pe:keyFilter>
										<p:ajax event="blur" update="sssscta, concep"
											listener="#{polizaMantenimientoMB3.sssscuentaChangeListener}"></p:ajax>
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Concepto"
							style="width:50%; text-align: left !important;">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.concep}" id="conceptoId"
										style="text-align: left !important;" />
								</f:facet>
								<f:facet name="input">
									<p:inputText id="concep" value="#{object.concep}"
										style="width:100%" maxlength="300"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;}">
										<p:ajax event="blur" update="concep"></p:ajax>
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="RefPol" style="width:5%">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.refpol}">
										<f:convertNumber pattern="#" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<pe:inputNumber id="refpol" value="#{object.refpol}"
										decimalPlaces="0"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;}">
										<p:ajax event="blur" update="refpol"></p:ajax>
										<pe:keyFilter mask="pint" regEx="/[0-9]/" />
										<f:convertNumber for="refpol" pattern="#0" />
									</pe:inputNumber>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Dn" style="width:4%">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.dn}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText id="dn" value="#{object.dn}" style="width:100%"
										maxlength="1" onkeyup="this.value=this.value.toUpperCase();"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;}">

										<p:ajax event="blur" update="dn"></p:ajax>
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Cargo" style="width:12%">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.canpol}" style="float:right;">
										<f:convertNumber pattern="###,###,##0.00" type="number" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputText id="canpol" value="#{object.canpol}"
										style="width:100%" maxlength="15"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;} if(event.KeyCode == 9){if(this.value == null){this.value = 0.0;} return false;}">
										<pe:keyFilter for="canpol" mask="num"></pe:keyFilter>
										<p:ajax event="blur" update="canpol"></p:ajax>
										<f:convertNumber pattern="###,###,##0.00" type="number" />
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Abono" style="width:12%">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.canpolh}" style="float:right;">
										<f:convertNumber pattern="###,###,##0.00" type="number" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputText id="canpolh" value="#{object.canpolh}"
										style="width:100%" maxlength="15"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13) {return false;}if(event.KeyCode == 9){zeroCH(); return false;}">
										<pe:keyFilter for="canpolh" mask="num"></pe:keyFilter>
										<p:ajax event="blur" update="canpolh"></p:ajax>
										<f:convertNumber pattern="###,###,##0.00" type="number" />
									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column headerText="Cuenta Adicional" style="width:5%">
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{object.cuenta1}" />
								</f:facet>
								<f:facet name="input">
									<p:inputText id="cuentaa" value="#{object.cuenta1}"
										style="width:100%" maxlength="4"
										onkeypress="if(event.keyCode == 27) {jQuery('span.ui-icon-close').last().click(); return false;} if (event.keyCode == 13 || event.keyCode == 9) {jQuery('#form1\\:objects span.ui-icon-check').last().click(); return false; } ">

									</p:inputText>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column width="5%">
							<p:rowEditor></p:rowEditor>
						</p:column>
						<p:column visible="false">
							<p:row>
								<h:outputText id="nomctaHidden" value="#{object.nomcta}" />
							</p:row>
						</p:column>
					</p:dataTable>

					<p:commandButton id="hideButton"
						actionListener="#{polizaMantenimientoMB3.updateViewRowsAutoGenerated}"
						update=":form1:messagesEdit, :form1:panel, :form1:objects, :form1:rowid, :form1:sumac, :form1:sumac, :form1:sumaa, :form1:sumaA8000, :form1:sumaB8000"
						style="visibility: hidden;"
						oncomplete="jQuery('div.ui-datatable-scrollable-body').scrollTop(jQuery('div.ui-datatable-scrollable-body').prop('scrollHeight'));" />

					<p:commandButton id="hideButton2"
						actionListener="#{polizaMantenimientoMB3.succesCancelEdition}"
						update=":form1:messagesEdit, :form1:panel, :form1:objects, :form1:rowid, :form1:sumac, :form1:sumac, :form1:sumaa, :form1:sumaA8000, :form1:sumaB8000, :form1:polclv1, :form1:nomcta"
						style="visibility: hidden;" immediate="true" process="@parent" />

					<p:commandButton id="hideButton3"
						actionListener="#{polizaMantenimientoMB3.goToLastPage}"
						update=":form1:messagesEdit, :form1:panel, :form1:objects, :form1:rowid, :form1:sumac, :form1:sumac, :form1:sumaa, :form1:sumaA8000, :form1:sumaB8000, :form1:polclv1, :form1:nomcta"
						style="visibility: hidden;" immediate="true" process="@parent" />

					<p:commandButton id="hideCleanButton" process="@this"
						style="visibility: hidden;"
						actionListener="#{polizaMantenimientoMB3.clean}" />
					<p:panelGrid id="pgrid2" columns="6"
						styleClass="green shadow-panel" style="width:100%;">
						<h:outputText value="Nombre Concepto:" />
						<h:inputText value="#{polizaMantenimientoMB3.nomSelectedConcept}"
							id="polclv1" size="110" maxlength="100" disabled="true" />
						<p:selectBooleanCheckbox id="repeatConcept"
							value="#{polizaMantenimientoMB3.repeatConcept}"
							itemLabel="Repetir Concepto">
							<p:ajax update="repeatConcept" />
						</p:selectBooleanCheckbox>

						<h:outputText value="Suma:" />
						<h:inputText value="#{polizaMantenimientoMB3.polien.cdebe}"
							id="sumaa" disabled="true" size="15" maxlength="15"
							style="text-align:right;">
							<f:convertNumber pattern="###,###,##0.00" type="number" />
						</h:inputText>
						<h:inputText id="sumac"
							value="#{polizaMantenimientoMB3.polien.chaber}" size="15"
							maxlength="15" disabled="true" style="text-align:right;">
							<f:convertNumber pattern="###,###,##0.00" type="number" />
						</h:inputText>

						<h:outputText value="Nombre Cuenta:" />
						<h:inputText value="#{polizaMantenimientoMB3.nomSelectedAcc}"
							id="nomcta" size="110" maxlength="80" disabled="true" />

						<h:outputText value="" />
						<h:outputText value="Suma 8000:" />
						<h:inputText value="#{polizaMantenimientoMB3.polien.ctc600}"
							id="sumaA8000" disabled="true" size="15" maxlength="15"
							style="text-align:right;">
							<f:convertNumber pattern="###,###,##0.00" type="number" />

						</h:inputText>
						<h:inputText value="#{polizaMantenimientoMB3.polien.cta600}"
							id="sumaB8000" disabled="true" size="15" maxlength="15"
							style="text-align:right;">
							<f:convertNumber pattern="###,###,##0.00" type="number" />
						</h:inputText>
					</p:panelGrid>

					<p:panelGrid id="pgrid3" columns="12"
						styleClass="green row-centered shadow-panel" style="width:100%;">
						<p:commandButton value="Primero" id="firstRow"
							icon="ui-icon-seek-first" style="visibility: hidden;"
							actionListener="#{polizaMantenimientoMB3.changeFirstRow}"
							update=":form1:objects, :form1:pgrid2, :form1:nomcta, :form1:polclv1" />
						<p:commandButton value="Anterior" id="prevRow"
							icon="ui-icon-seek-prev" style="visibility: hidden;"
							actionListener="#{polizaMantenimientoMB3.changePrevRow}"
							update=":form1:objects, :form1:pgrid2, :form1:nomcta, :form1:polclv1" />
						<p:commandButton value="Siguiente" id="nextRow"
							icon="ui-icon-seek-next" style="visibility: hidden;"
							actionListener="#{polizaMantenimientoMB3.changeNextRow}"
							update=":form1:objects, :form1:pgrid2, :form1:nomcta, :form1:polclv1" />
						<p:commandButton value="Ultimo" id="lastRow"
							icon="ui-icon-seek-end" style="visibility: hidden;"
							actionListener="#{polizaMantenimientoMB3.changeEndRow}"
							update=":form1:objects, :form1:pgrid2, :form1:nomcta, :form1:polclv1" />

						<h:outputText value="Renglon:" />
						<h:inputText value="#{polizaMantenimientoMB3.renglon}" id="rowid"
							maxlength="9"
							onkeypress="if((!this.value || 0 === this.value.length) ){ if( event.keyCode == 9 || event.keyCode == 13){return false;}}if (event.keyCode == 13){document.getElementById('form1:hideButtonRow').click(); return false}">
							<pe:keyFilter for="rowid" mask="pint"></pe:keyFilter>
						</h:inputText>
						<p:commandButton id="hideButtonRow"
							update=":form1:objects, :form1:messagesEdit"
							actionListener="#{polizaMantenimientoMB3.changeRow}"
							style="visibility: hidden;" />
						<p:commandButton value="Polizas Incorrectas" id="wrongbuton"
							actionListener="#{polizaMantenimientoMB3.cleanWronPolicies}"
							oncomplete="PF('wrongPoli').show();"
							update=":formPolizaIncorrecta:wrongP, :formPolizaIncorrecta:wrongTable, :formPolizaIncorrecta:pgridWrongs, :formPolizaIncorrecta:wrongmes"
							icon="ui-icon-closethick" />
						<p:commandButton value="Imprimir Poliza" id="impresion"
							style="margin-left: 47%; padding: 1px;"
							actionListener="#{polizaMantenimientoMB3.createFilePdf}"
							icon="ui-icon-print"
							oncomplete="PF('blockUIWidget').unblock();PF('impPoliza').show();"
							onstart="PF('blockUIWidget').block();"
							update=":formImprimirPoliza:imPoliza" />
						<p:commandButton value="Adicionar" id="addpoliza"
							actionListener="#{polizaMantenimientoMB3.createFirstRow}"
							update=":form1:messagesEdit, :form1:panel, :form1:objects, :form1:rowid, :form1:pgrid2, :form1:fcsObjects"
							icon="ui-icon-plus"
							disabled="#{polizaMantenimientoMB3.activButtons}" />
						<p:commandButton value="Borrar" id="borrar"
							actionListener="#{polizaMantenimientoMB3.deleteRow}"
							disabled="#{polizaMantenimientoMB3.activButtons}"
							update=":form1:messagesEdit, :form1:panel, :form1:objects, :form1:rowid, :form1:pgrid2, :form1:pgrid3"
							icon="ui-icon-trash" onstart="PF('blockUIWidget').block();"
							oncomplete="PF('blockUIWidget').unblock();" />
						<p:commandButton id="hideButtonCreateRow"
							update=":form1:objects, :form1:messagesEdit"
							oncomplete="jQuery('#form1\\:objects tr').last().find('span.ui-icon-pencil').each(function(){jQuery(this).click()});"
							style="visibility: hidden;" />
					</p:panelGrid>
				</p:panel>
			</h:form>

			<h:form id="formImprimirPoliza" styleClass="green">
				<p:dialog header="Imprimir Poliza" id="imPoliza"
					widgetVar="impPoliza" width="800" height="500">
					<!-- 					<p:media id="pdfContent" 
						value="#{polizaMantenimientoMB3.filePdfPath}" width="100%"
						height="500" player="pdf">
					</p:media>
					-->

					<object type="application/pdf"
						data="#{request.contextPath}/GetFileInline?uuid=#{polizaMantenimientoMB3.uuid}&amp;filename=#{polizaMantenimientoMB3.endFilename}"
						height="380px" width="100%"> Tu browser no puede
						desplegar el PDF, Descargarlo directamente. </object>
				</p:dialog>
			</h:form>

			<h:form id="formConfirmDate" styleClass="green">
				<p:dialog id="saveConfirmDate" widgetVar="saveConfirmDateWdt"
					header="Confirma" modal="true" styleClass="green">
					<p:panelGrid id="pgridSaveUpdateDate" columns="1">
						<h:outputText
							value="¿Desea guardar los cambios al encabezado de la p&oacute;liza?" />
						<center>
							<p:panelGrid id="pgridSaveUpdateDateButtons" columns="2">
								<p:commandButton value="Guardar"
									update=":form1:messagesEdit, :form1:panel, form1:objects"
									actionListener="#{polizaMantenimientoMB3.saveUpdateDate}"
									oncomplete="PF('saveConfirmDateWdt').hide();" />
								<p:commandButton value="Cancelar"
									update=":form1:messagesEdit, :form1:panel, :form1:objects, :form1:fecpol"
									oncomplete="PF('saveConfirmDateWdt').hide();"
									actionListener="#{polizaMantenimientoMB3.cancelSaveUpdateDate}" />
							</p:panelGrid>
						</center>
					</p:panelGrid>
				</p:dialog>
			</h:form>

			<h:form id="formSaveConfirm" styleClass="green">
				<p:dialog id="saveConfirm" widgetVar="saveConfirmWdt"
					header="Confirma" modal="true" styleClass="green">
					<p:panelGrid id="pgridSaveUpdate" columns="1">
						<h:outputText
							value="¿Desea guardar los cambios al encabezado de la p&oacute;liza?" />
						<center>
							<p:panelGrid id="pgridSaveUpdateButtons" columns="2">
								<p:commandButton value="Guardar"
									update=":form1:messagesEdit, :form1:panel, form1:objects"
									actionListener="#{polizaMantenimientoMB3.saveUpdate}"
									oncomplete="PF('saveConfirmWdt').hide();" />
								<p:commandButton value="Cancelar"
									update=":form1:messagesEdit, :form1:panel, form1:objects"
									oncomplete="PF('saveConfirmWdt').hide();" />
							</p:panelGrid>
						</center>
					</p:panelGrid>
				</p:dialog>
			</h:form>

			<h:form id="formPanelValida" styleClass="green">
				<p:dialog id="panelValida" widgetVar="wingetPasswor"
					header="Valida Password" modal="true" styleClass="green">
					<p:panelGrid id="pgridpass" columns="2">
						<h:outputText value="Password Administrador" />
						<h:inputSecret id="validatePass"
							value="#{polizaMantenimientoMB3.password}"
							onkeypress="if(event.keyCode == 27) {PF('wingetPasswor').hide(); return false;}" />
						<h:outputText value="" />
						<p:commandButton value="Validar"
							update=":form1:messagesEdit, :form1:panel, form1:objects"
							actionListener="#{polizaMantenimientoMB3.isPassvalidate}"
							onstart="PF('wingetPasswor').hide(); PF('blockUIWidget').block();"
							oncomplete="PF('blockUIWidget').unblock(); resetPassMaintenance();" />
					</p:panelGrid>
				</p:dialog>
			</h:form>

			<h:form id="formFlujoEfectivo" styleClass="green">
				<p:focus context="formFlujoEfectivo" />
				<p:dialog id="ff" widgetVar="flujoefectivo" modal="true" width="570"
					height="410" closable="false" resizable="false">
					<p:commandButton id="hideButtonFlowRow"
						actionListener="#{polizaMantenimientoMB3.checkCatflu}"
						update=":formFlujoEfectivo:ctafluTable"
						style="visibility: hidden;" />
					<p:panelGrid columns="8">
						<h:outputText value="Tipo:" />
						<h:inputText value="#{polizaMantenimientoMB3.tippolflu}"
							id="tippolflu" size="2" maxlength="2" disabled="true" />
						<h:outputText value="Mes:" />
						<h:inputText value="#{polizaMantenimientoMB3.mespolflu}"
							id="mespolflu" size="2" maxlength="2" disabled="true" />
						<h:outputText value="Numero:" />
						<h:inputText value="#{polizaMantenimientoMB3.conpolflu}"
							id="conpolflu" size="4" maxlength="4" disabled="true">
							<f:convertNumber pattern="0000" />
						</h:inputText>
						<h:outputText value="Rengl&oacute;n:" />
						<h:inputText value="#{polizaMantenimientoMB3.renpolflu}"
							id="renpolflu" size="2" maxlength="2" disabled="true" />
					</p:panelGrid>
					<p:messages for="errorMsg" id="errorMsg" closable="true"
						showDetail="true" />
					<br />
					<p:dataTable widgetVar="ctafluTableWgt"
						selection="#{polizaMantenimientoMB3.polifl2}" id="ctafluTable"
						var="o" value="#{polizaMantenimientoMB3.orderlist}"
						styleClass="et_datatable" emptyMessage="No hay registros"
						editable="true" selectionMode="single" rowKey="#{o.index}"
						scrollRows="5" scrollable="true" scrollHeight="100"
						style="margin-bottom:20px">
						<f:facet name="header">  
			                       Flujo de Efectivo
			                    </f:facet>

						<p:ajax event="rowEditInit"
							listener="#{polizaMantenimientoMB3.onEditInit}"></p:ajax>
						<p:ajax event="rowEdit"
							listener="#{polizaMantenimientoMB3.onEdit}"
							update=":formFlujoEfectivo:sumaflujoe, :formFlujoEfectivo:sumaflujobuff, :formFlujoEfectivo:errorMsg" />
						<p:ajax event="rowEditCancel"
							listener="#{polizaMantenimientoMB3.onCancel}"
							update=":formFlujoEfectivo:errorMsg" />

						<p:column width="15%">
							<f:facet name="header">
								<h:outputText value="Clave" />
							</f:facet>
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{o.clvflu}">
										<f:convertNumber pattern="00.00" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<pe:inputNumber id="oclvflu" value="#{o.clvflu}"
										emptyValue="00.00" decimalPlaces="2" decimalSeparator="."
										required="true" maxlength="5" thousandSeparator=""
										onkeypress="if((!this.value || 0 === this.value.length) ){ if( event.keyCode == 9 || event.keyCode == 13){return false;}} if (event.keyCode == 13){return false;} ">
										<p:ajax event="blur" update="oclvflu"></p:ajax>
									</pe:inputNumber>
								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Cantidad" />
							</f:facet>
							<p:cellEditor>
								<f:facet name="output">
									<h:outputText value="#{o.canflu}" style="float:right;">
										<f:convertNumber pattern="###,###,##0.00" />
									</h:outputText>
								</f:facet>
								<f:facet name="input">
									<p:inputText id="ocanflu" value="#{o.canflu}"
										style="width:100%"
										onkeypress="if(event.keyCode == 13){return false;}">
										<pe:keyFilter for="ocanflu" mask="num"></pe:keyFilter>
										<p:ajax event="blur" update="ocanflu"></p:ajax>
										<f:convertNumber pattern="###,###,##0.00" type="number" />
									</p:inputText>

								</f:facet>
							</p:cellEditor>
						</p:column>

						<p:column width="10%">
							<p:rowEditor />
						</p:column>

					</p:dataTable>

					<br />
					<h:outputText value="Total concepto:" />
					<h:inputText value="#{polizaMantenimientoMB3.sumaFf}"
						id="sumaflujoe" disabled="true" style="text-align: rigth">
						<f:convertNumber pattern="###,###,##0.00" />
					</h:inputText>

					<h:outputText value="Suma:" />
					<h:inputText value="#{polizaMantenimientoMB3.sumaFfBuff}"
						id="sumaflujobuff" disabled="true" style="text-align: rigth">
						<f:convertNumber pattern="###,###,##0.00" />
					</h:inputText>
					<br />
					<br />
					<center>
						<p:panelGrid columns="4">
							<p:commandButton value="Agregar"
								actionListener="#{polizaMantenimientoMB3.addAction}" id="add"
								update=":formFlujoEfectivo:ctafluTable">

							</p:commandButton>
							<p:commandButton value="Borrar"
								actionListener="#{polizaMantenimientoMB3.removeListFl}"
								id="deleteFlowRow"
								update=":formFlujoEfectivo:errorMsg, :formFlujoEfectivo:ctafluTable, :formFlujoEfectivo:sumaflujobuff" />

							<p:commandButton value="Salir" id="salir"
								actionListener="#{polizaMantenimientoMB3.onExitFlow}"
								update=":formFlujoEfectivo:errorMsg" />
						</p:panelGrid>
					</center>
				</p:dialog>
			</h:form>

			<h:form id="formCuentas" styleClass="green">
				<p:dialog id="concuentas" widgetVar="cuentascon" width="1000"
					modal="true" height="480" header="Consulta de Cuentas">
					<p:dataTable id="tcuentas" var="object3" styleClass="et_datatable"
						resizableColumns="true" widgetVar="tbCuentas"
						value="#{polizaMantenimientoMB3.cuentaPolizaDataModel}"
						lazy="true" selectionMode="single" emptyMessage="No hay registros"
						paginator="true" rows="10" rowKey="#{object3.id}"
						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
						<p:ajax event="rowDblselect"
							update=":form1:objects, :form1:focusTable"
							listener="#{polizaMantenimientoMB3.onCuentaRowDblClckSelect}"
							oncomplete="PF('cuentascon').hide();"></p:ajax>

						<p:column headerText="Cuenta" filterMatchMode="startswith"
							filterBy="#{object3.cuenta}" width="11%" filterMaxLength="4">
							<h:outputText value="#{object3.cuenta}" />
						</p:column>

						<p:column headerText="Scuenta" filterMaxLength="10"
							filterBy="#{object3.scuenta}" filterMatchMode="startswith"
							width="9%">
							<h:outputText value="#{object3.scuenta}" />
						</p:column>
						<p:column headerText="Sscuenta" width="12%">
							<h:outputText value="#{object3.sscuenta}" />
						</p:column>

						<p:column headerText="Ssscuenta" width="7%">
							<h:outputText value="#{object3.ssscuenta}" />
						</p:column>
						<p:column headerText="Sssscuenta" width="8%">
							<h:outputText value="#{object3.sssscuenta}" />
						</p:column>

						<p:column headerText="Nombre Cuenta" width="50%">
							<h:outputText value="#{object3.nomcta}" style="float:left;" />
						</p:column>
					</p:dataTable>
				</p:dialog>
			</h:form>

			<h:form id="formPolizaIncorrecta" styleClass="green">
				<p:dialog header="P&oacute;lizas Incorrectas" widgetVar="wrongPoli"
					id="wrongP" width="800" height="405">
					<p:messages id="messages" showDetail="true" autoUpdate="true"
						closable="true" />
					<center>
						<p:panelGrid columns="3" id="pgridWrongs">
							<h:outputText value="Mes:" />
							<h:inputText value="#{polizaMantenimientoMB3.me}" id="wrongmes"
								size="2" maxlength="2" />
							<p:commandButton value="Buscar" id="wserach"
								icon="ui-icon-search"
								actionListener="#{polizaMantenimientoMB3.findWrongPolicy}"
								update=":formPolizaIncorrecta:wrongTable" />
						</p:panelGrid>
						<p:dataTable id="wrongTable" var="object2"
							value="#{polizaMantenimientoMB3.listIncorrectas}"
							styleClass="et_datatable" emptyMessage="No hay registros"
							editable="true" paginator="true" rows="10"
							paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

							<p:column headerText="Tipo" width="5%">
								<center>
									<h:outputText value="#{object2.tippol}"
										style="text-align:center;" />
								</center>
							</p:column>
							<p:column headerText="Mes" width="5%">
								<center>
									<h:outputText value="#{object2.mespol}" />
								</center>
							</p:column>
							<p:column headerText="N&uacute;mero" width="5%">
								<center>
									<h:outputText value="#{object2.conpol}" />
								</center>
							</p:column>
							<p:column headerText="Suma  Debe" width="10%">
								<h:outputText value="#{object2.sdebe}" style="float:right;">
									<f:convertNumber pattern="###,###,##0.00" type="number" />
								</h:outputText>
							</p:column>
							<p:column headerText="Suma Haber" width="10%">
								<h:outputText value="#{object2.shaber}" style="float:right;">
									<f:convertNumber pattern="###,###,##0.00" type="number" />
								</h:outputText>
							</p:column>
							<p:column headerText="Cargo 8000" width="10%">
								<h:outputText value="#{object2.ctc6000}" style="float:right;">
									<f:convertNumber pattern="###,###,##0.00" type="number" />
								</h:outputText>
							</p:column>
							<p:column headerText="Abono 8000" width="10%">
								<h:outputText value="#{object2.cta6000}" style="float:right;">
									<f:convertNumber pattern="###,###,##0.00" type="number" />
								</h:outputText>
							</p:column>
						</p:dataTable>
					</center>
				</p:dialog>
			</h:form>

			<h:form id="formConfirmFF">
				<p:dialog id="ffConfirm" widgetVar="ffConfirmWdt" header="Confirma"
					modal="true" styleClass="green">
					<p:panelGrid id="pgridFfConfirm" columns="1">
						<h:outputText
							value="El concepto tiene flujo de efectivo. ¿Desea editarlo?" />
						<center>
							<p:panelGrid id="pgridSaveUpdateButtons" columns="2">
								<p:commandButton value="Aceptar"
									update=":formFlujoEfectivo:ctafluTable, :formFlujoEfectivo:tippolflu, :formFlujoEfectivo:mespolflu, :formFlujoEfectivo:conpolflu, :formFlujoEfectivo:sumaflujoe, :formFlujoEfectivo:renpolflu"
									onstart="PF('flujoefectivo').show();"
									oncomplete="PF('ffConfirmWdt').hide();" />
								<p:commandButton value="Cancelar"
									update=":form1:messagesEdit, :form1:panel, form1:objects"
									oncomplete="PF('ffConfirmWdt').hide();" />
							</p:panelGrid>
						</center>
					</p:panelGrid>
				</p:dialog>
				<h:outputScript id="handleCloseScript" target="body">					
					$(window).bind('unload', function(){						
						jQuery('#form1\\:hideCleanButton').click();
					});
				</h:outputScript>
			</h:form>
			<script type="text/javascript">
			function resetPassMaintenance() {
				$('#formPanelValida\\:validatePass').val('');
			}

			function focusCuenta(index) {
				 $( "#form1\\:objects\\:"+index+"\\:cuenta" ).focus();
			}
			
			</script>
		</ui:define>
	</ui:composition>
</h:body>
</html>